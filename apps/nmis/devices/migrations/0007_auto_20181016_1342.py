# Generated by Django 2.0 on 2018-10-16 13:42

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('hospitals', '0005_hospitaladdress'),
        ('devices', '0006_merge_20180829_1038'),
    ]

    operations = [
        migrations.CreateModel(
            name='AssertDevice',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('assert_no', models.CharField(max_length=64, unique=True, verbose_name='资产编号')),
                ('title', models.CharField(max_length=128, verbose_name='资产名称')),
                ('cate', models.CharField(choices=[('ME', '医疗设备'), ('IN', '信息化设备')], default='ME', max_length=2, verbose_name='资产设备类型')),
                ('serial_no', models.CharField(max_length=64, unique=True, verbose_name='资产序列号')),
                ('type_spec', models.CharField(max_length=32, verbose_name='规格型号')),
                ('service_life', models.SmallIntegerField(verbose_name='预计使用年限')),
                ('production_date', models.DateField(verbose_name='出厂日期')),
                ('bar_code', models.CharField(blank=True, max_length=128, null=True, verbose_name='设备条形码')),
                ('producer', models.CharField(blank=True, max_length=128, null=True, verbose_name='厂家')),
                ('purchase_date', models.DateField(verbose_name='购入日期')),
                ('status', models.CharField(choices=[('FR', '闲置'), ('US', '使用中'), ('IM', '维修中'), ('SC', '已报废')], default='FR', max_length=3, verbose_name='资产状态')),
                ('state', models.CharField(choices=[('NW', '新建'), ('NL', '正常')], default='NW', max_length=3, verbose_name='数据状态')),
                ('modified_time', models.DateTimeField(blank=True, null=True, verbose_name='修改时间')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_assert_device', to='hospitals.Staff', verbose_name='创建人')),
            ],
            options={
                'verbose_name': '资产设备',
                'verbose_name_plural': '资产设备',
                'db_table': 'devices_assert_device',
            },
        ),
        migrations.CreateModel(
            name='AssertDeviceRecord',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('operation', models.CharField(choices=[('SMT', '提交'), ('LAC', '调配'), ('SCP', '报废'), ('RPR', '维修')], default='SMT', max_length=3, verbose_name='操作')),
                ('reason', models.CharField(blank=True, default='', max_length=128, null=True, verbose_name='执行当前操作的原因')),
                ('msg_content', models.CharField(max_length=128, verbose_name='操作内容')),
                ('assert_device', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='devices.AssertDevice', verbose_name='资产设备')),
                ('operator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='operate_assert_device_record', to='hospitals.Staff', verbose_name='操作人')),
                ('receiver', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='hospitals.Staff', verbose_name='操作的接受方')),
            ],
            options={
                'verbose_name': '设备变更记录',
                'verbose_name_plural': '设备变更记录',
                'db_table': 'devices_assert_device_record',
            },
        ),
        migrations.CreateModel(
            name='FaultSolution',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('title', models.CharField(max_length=128, verbose_name='标题')),
                ('desc', models.CharField(max_length=1024, verbose_name='故障/问题描述')),
                ('solution', models.TextField(max_length=2048, verbose_name='解决方案')),
                ('doc_list', models.CharField(blank=True, max_length=16, null=True, verbose_name='附件')),
                ('status', models.CharField(choices=[('NW', '新建/待审核'), ('NM', '正常')], default='NW', max_length=3, verbose_name='状态')),
                ('page_views', models.IntegerField(blank=True, null=True, verbose_name='浏览次数')),
                ('likes', models.IntegerField(blank=True, null=True, verbose_name='点赞数')),
                ('modified_time', models.DateTimeField(blank=True, null=True, verbose_name='修改时间')),
                ('audited_time', models.DateTimeField(blank=True, null=True, verbose_name='审核时间')),
                ('auditor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='audited_problem_solution', to='hospitals.Staff', verbose_name='审核人')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_problem_solution', to='hospitals.Staff', verbose_name='创建人')),
            ],
            options={
                'verbose_name': '故障/问题解决方案',
                'verbose_name_plural': '故障/问题解决方案',
                'db_table': 'devices_fault_solution',
            },
        ),
        migrations.CreateModel(
            name='FaultType',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('title', models.CharField(max_length=6, verbose_name='故障类型名称')),
                ('desc', models.CharField(blank=True, max_length=255, null=True, verbose_name='故障类型描述')),
                ('parent_path', models.CharField(default='', max_length=1024, verbose_name='父类型路径')),
                ('level', models.SmallIntegerField(default=1, verbose_name='所属层级')),
                ('sort', models.SmallIntegerField(default=1, verbose_name='排序码')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_fault_type', to='hospitals.Staff', verbose_name='创建人')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='devices.FaultType', verbose_name='父类故障类型')),
            ],
            options={
                'verbose_name': ('故障类型',),
                'verbose_name_plural': ('故障类型',),
                'db_table': 'devices_fault_type',
            },
        ),
        migrations.CreateModel(
            name='MaintenancePlan',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('plan_no', models.CharField(max_length=64, unique=True, verbose_name='计划编号')),
                ('title', models.CharField(max_length=32, verbose_name='计划名称')),
                ('type', models.CharField(choices=[('PL', '巡检'), ('UK', '保养'), ('ST', '盘点')], default='PL', max_length=3, verbose_name='维保计划类型')),
                ('start_date', models.DateTimeField(verbose_name='开始日期')),
                ('period_measure', models.CharField(blank=True, choices=[('MAINTENANCE_PLAN_PERIOD_MEASURE_YEAR', '年'), ('MAINTENANCE_PLAN_PERIOD_MEASURE_MONTH', '月'), ('MAINTENANCE_PLAN_PERIOD_MEASURE_WEEK', '周'), ('MAINTENANCE_PLAN_PERIOD_MEASURE_DAY', '日')], default='D', max_length=2, null=True, verbose_name='执行周期计量单位')),
                ('period_num', models.IntegerField(blank=True, null=True, verbose_name='执行周期数')),
                ('expired_date', models.DateTimeField(verbose_name='截止日期')),
                ('executed_date', models.DateTimeField(blank=True, null=True, verbose_name='执行日期')),
                ('result', models.CharField(blank=True, max_length=128, null=True, verbose_name='计划执行结果')),
                ('status', models.CharField(choices=[('NW', ' 新建/未执行'), ('DN', '已执行')], default='NW', max_length=3, verbose_name='状态')),
                ('modified_time', models.DateTimeField(blank=True, null=True, verbose_name='修改时间')),
                ('assert_devices', models.ManyToManyField(blank=True, related_name='plan_device_list', to='devices.AssertDevice', verbose_name='计划维保设备清单')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_maintenance_plan', to='hospitals.Staff', verbose_name='创建人')),
                ('executor', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='executed_maintenance_plan', to='hospitals.Staff', verbose_name='执行人')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_maintenance_plan', to='hospitals.Staff', verbose_name='修改人')),
                ('places', models.ManyToManyField(blank=True, related_name='plan_place_ships', to='hospitals.HospitalAddress', verbose_name='维保地点列表')),
            ],
            options={
                'verbose_name': '设备维护保养计划',
                'verbose_name_plural': '设备维护保养计划',
                'db_table': 'devices_maintenance_plan',
            },
        ),
        migrations.CreateModel(
            name='MedicalDeviceSix8Cate',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('code', models.CharField(max_length=6, unique=True, verbose_name='分类编号')),
                ('title', models.CharField(max_length=128, verbose_name='分类名称')),
                ('level', models.SmallIntegerField(default=1, verbose_name='分类等级')),
                ('example', models.CharField(blank=True, max_length=10240, null=True, verbose_name='品名举例')),
                ('mgt_cate', models.SmallIntegerField(choices=[(1, 'Ⅰ类'), (2, 'Ⅱ类'), (3, 'Ⅲ类')], default=1, verbose_name='管理类别')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_medical_device_cate', to='hospitals.Staff', verbose_name='创建人')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='child_six8_cate', to='devices.MedicalDeviceSix8Cate', verbose_name='父级分类')),
            ],
            options={
                'verbose_name': ' 医疗器械分类(68码)',
                'verbose_name_plural': ' 医疗器械分类(68码)',
                'db_table': 'device_medical_device_six8_cate',
            },
        ),
        migrations.CreateModel(
            name='RepairOrder',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('order_no', models.CharField(max_length=64, unique=True, verbose_name='报修单号')),
                ('desc', models.CharField(blank=True, max_length=1024, null=True, verbose_name='故障描述')),
                ('expenses', models.FloatField(blank=True, null=True, verbose_name='维修费用')),
                ('result', models.CharField(blank=True, max_length=128, null=True, verbose_name='处理结果')),
                ('solution', models.TextField(blank=True, max_length=2048, null=True, verbose_name='解决方案')),
                ('doc_list', models.CharField(blank=True, max_length=16, null=True, verbose_name='附件')),
                ('priority', models.CharField(blank=True, choices=[('L', '低'), ('M', '中'), ('H', '高'), ('E', '紧急'), ('U', '非常紧急')], default='', max_length=2, null=True, verbose_name='优先级')),
                ('status', models.CharField(choices=[('SMT', '已提交/待分派'), ('DNG', '处理中/已分派'), ('DNE', '已完成'), ('RTN', '已退回'), ('CLS', '已关闭')], default='SMT', max_length=3, verbose_name='状态')),
                ('comment_grade', models.SmallIntegerField(blank=True, null=True, verbose_name='评价等级')),
                ('comment_content', models.CharField(blank=True, max_length=128, null=True, verbose_name='评价内容')),
                ('comment_time', models.DateTimeField(blank=True, null=True, verbose_name='评价时间')),
                ('modified_time', models.DateTimeField(blank=True, null=True, verbose_name='修改时间')),
                ('applicant', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='applied_repair_order', to='hospitals.Staff', verbose_name='报修人/申请人')),
                ('assert_devices', models.ManyToManyField(blank=True, related_name='repair_device_list', to='devices.AssertDevice', verbose_name='报修设备清单')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_repair_order', to='hospitals.Staff', verbose_name='创建人')),
                ('fault_type', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='devices.FaultType', verbose_name='故障分类')),
                ('maintainer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='hospitals.Staff', verbose_name='维修工程师')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_repair_order', to='hospitals.Staff', verbose_name='修改人')),
            ],
            options={
                'verbose_name': '报修单/维修工单',
                'verbose_name_plural': '报修单/维修工单',
                'db_table': 'devices_repair_order',
            },
        ),
        migrations.CreateModel(
            name='RepairOrderRecord',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('operation', models.CharField(choices=[('SMT', '提交'), ('DSP', '分派'), ('RTN', '退回'), ('HDL', '处理'), ('CMT', '评价'), ('CLS', '关闭')], default='SMT', max_length=3, verbose_name='操作')),
                ('reason', models.CharField(blank=True, default='', max_length=128, null=True, verbose_name='执行当前操作的原因')),
                ('msg_content', models.CharField(max_length=128, verbose_name='操作内容')),
                ('operator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='operate_repair_order_record', to='hospitals.Staff', verbose_name='操作人')),
                ('receiver', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='hospitals.Staff', verbose_name='操作的接受方')),
                ('repair_order', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='devices.RepairOrder', verbose_name='报修单/维修单')),
            ],
            options={
                'verbose_name': '报修单操作记录',
                'verbose_name_plural': '报修单操作记录',
                'db_table': 'devices_repair_order_record',
            },
        ),
        migrations.AddField(
            model_name='faultsolution',
            name='fault_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='related_problem_solution', to='devices.FaultType', verbose_name='故障/问题分类'),
        ),
        migrations.AddField(
            model_name='faultsolution',
            name='modifier',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_problem_solution', to='hospitals.Staff', verbose_name='修改人'),
        ),
        migrations.AddField(
            model_name='assertdevice',
            name='medical_device_cate',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='related_assert_device', to='devices.MedicalDeviceSix8Cate', verbose_name='医疗器械分类'),
        ),
        migrations.AddField(
            model_name='assertdevice',
            name='modifier',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_assert_device', to='hospitals.Staff', verbose_name='修改人'),
        ),
        migrations.AddField(
            model_name='assertdevice',
            name='performer',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='performed_assert_device', to='hospitals.Staff', verbose_name='资产负责人'),
        ),
        migrations.AddField(
            model_name='assertdevice',
            name='responsible_dept',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='responsible_assert_device', to='hospitals.Department', verbose_name='负责科室'),
        ),
        migrations.AddField(
            model_name='assertdevice',
            name='storage_place',
            field=models.ForeignKey(blank=True, null=True, on_delete='存放地点', to='hospitals.HospitalAddress'),
        ),
        migrations.AddField(
            model_name='assertdevice',
            name='use_dept',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='used_assert_device', to='hospitals.Department', verbose_name='使用科室'),
        ),
    ]
